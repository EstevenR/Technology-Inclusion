services:
  # Backend (FastAPI) en plan FREE
  - type: web
    name: backend
    runtime: python
    plan: free
    rootDir: backend
    buildCommand: "pip install -r requirements.txt"
    startCommand: "uvicorn main:app --host 0.0.0.0 --port $PORT"
    healthCheckPath: /api/health

  # Frontend (Vite) como sitio estático (gratis)
  - type: web
    name: frontend
    runtime: static
    # Se elimina rootDir y se usa `cd` en el buildCommand para ser más explícitos
    buildCommand: "cd \"Technology Inclusion pagina\" && bun install && bun run build"
    staticPublishPath: "Technology Inclusion pagina/dist" # Esta ruta es relativa a la raíz del repo
    routes:
      - type: rewrite
        source: /*
        destination: /index.html